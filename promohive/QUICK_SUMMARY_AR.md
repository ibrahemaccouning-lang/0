# ููุฎุต ุณุฑูุน - ุฅุตูุงุญุงุช PromoHive

## ๐ฏ ุงููุดุงูู ุงูุชู ุชู ุฅุตูุงุญูุง

### 1. ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูุง ูุธูุฑูู ูู ุตูุญุฉ ุงูุฃุฏูู โ
- **ุงูุณุจุจ:** ุฎุทุฃ ูู ุฏุงูุฉ `getUsers` ูู `adminService.js`
- **ุงูุญู:** ุฅุฒุงูุฉ ุงูุดุฑุท ุงูุฅุดูุงูู ุงูุฐู ูุงู ูููุน ุนุฑุถ ุงููุณุชุฎุฏููู

### 2. ุนุฏู ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุนุฏ ุงูููุงููุฉ โ
- **ุงูุณุจุจ:** ุฏุงูุฉ `approveUser` ูุง ุชุณุชุฏุนู `sendNotificationEmail`
- **ุงูุญู:** ุฅุถุงูุฉ ุงุณุชุฏุนุงุก ูุฅุฑุณุงู ุงูุจุฑูุฏ ูู ุฏุงูุฉ ุงูููุงููุฉ

### 3. ูุดุงูู ูู ุงูุฅุญุตุงุฆูุงุช โ
- **ุงูุณุจุจ:** ููุทู ุฎุงุทุฆ ูู ุญุณุงุจ ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุนูููู
- **ุงูุญู:** ุชุญุฏูุซ ููุทู ุงูุญุณุงุจ ูู `users-management/index.jsx`

### 4. ูุดุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
- **ุงูุณุจุจ:** triggers ุบูุฑ ูุญุฏุซุฉุ ุฏูุงู ูุงูุตุฉ
- **ุงูุญู:** ููู SQL ุดุงูู ูุฅุตูุงุญ ุฌููุน ุงููุดุงูู

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. **src/services/adminService.js**
   - ุฅุตูุงุญ `getUsers()`
   - ุฅุตูุงุญ `approveUser()` ูุน ุฅุถุงูุฉ ุฅุฑุณุงู ุงูุจุฑูุฏ

2. **src/pages/users-management/index.jsx**
   - ุฅุตูุงุญ ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช

3. **supabase/migrations/20241031_fix_admin_approval_issues.sql** (ุฌุฏูุฏ)
   - ุชุญุฏูุซ trigger ุงูุชุณุฌูู
   - ุฅุถุงูุฉ ุฏูุงู ุฌุฏูุฏุฉ ููููุงููุฉ/ุงูุฑูุถ
   - ุฅุตูุงุญ ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช

## ๐ ุงูุชุทุจูู ุงูุณุฑูุน (3 ุฎุทูุงุช)

### 1๏ธโฃ ุชุทุจูู ุฅุตูุงุญุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
```
1. ุงูุชุญ Supabase Dashboard โ SQL Editor
2. ุงูุชุญ ููู: supabase/migrations/20241031_fix_admin_approval_issues.sql
3. ุงูุณุฎ ุงููุญุชูู ูุงูุตูู ูู SQL Editor
4. ุงุถุบุท Run
```

### 2๏ธโฃ ุงูุชุญูู ูู Environment Variables
```
ุชุฃูุฏ ูู ุฅุถุงูุฉ ูุฐู ุงููุชุบูุฑุงุช ูู Supabase:
- SMTP_HOST
- SMTP_PORT
- SMTP_USER
- SMTP_PASS
- SMTP_FROM
```

### 3๏ธโฃ ุฑูุน ุงูููุฏ ุงููุญุฏุซ
```bash
# ุงุณุชุฎุฑุงุฌ ุงููููุงุช
tar -xzf promohive-fixed.tar.gz

# ุจูุงุก ูุฑูุน
cd promohive
npm install
npm run build
netlify deploy --prod
```

## โ ุงุฎุชุจุงุฑ ุณุฑูุน (ุฏูููุชุงู)

1. **ุณุฌู ูุณุชุฎุฏู ุฌุฏูุฏ** โ ูุฌุจ ุฃู ูุธูุฑ ุฑุณุงูุฉ ุงูุชุธุงุฑ ุงูููุงููุฉ
2. **ุณุฌู ุฏุฎูู ูุฃุฏูู** โ ูุฌุจ ุฃู ูุธูุฑ ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ
3. **ุงุถุบุท Approve** โ ูุฌุจ ุฃู ูุตู ุจุฑูุฏ ูููุณุชุฎุฏู
4. **ุชุญูู ูู ุงูุจุฑูุฏ** โ ูุฌุจ ุฃู ูุฐูุฑ ุงูุจููุต $5

## ๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```sql
-- ุนุฑุถ ุงููุณุชุฎุฏููู ุงููุนูููู
SELECT id, email, full_name, approval_status 
FROM user_profiles 
WHERE approval_status = 'pending' OR approval_status IS NULL;

-- ุนุฑุถ ุขุฎุฑ ุงูุนูููุงุช
SELECT * FROM audit_logs ORDER BY created_at DESC LIMIT 5;
```

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงูุจุฑูุฏ ูุง ูุตูุ
1. ุชุญูู ูู Edge Function logs ูู Supabase
2. ุชุญูู ูู SMTP password
3. ุงุฎุชุจุฑ Edge Function ูุฏููุงู

### ุงููุณุชุฎุฏููู ูุง ูุธูุฑููุ
1. ุชุญูู ูู RLS Policies
2. ุชุญูู ูู ุฏูุฑ ุงูุฃุฏูู ูู user_profiles
3. ุงูุชุญ console ูู ุงููุชุตูุญ ููุฃุฎุทุงุก

## ๐ ุงููุณุงุนุฏุฉ

- **ุชูุงุตูู ูุงููุฉ:** ุฑุงุฌุน `FIXES_APPLIED.md`
- **ุฏููู ุงูุชุทุจูู:** ุฑุงุฌุน `README_FIXES_AR.md`
- **ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑ:** ุฑุงุฌุน `TESTING_CHECKLIST.md`

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ุงูุชุทุจูู:
- โ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูุธูุฑูู ููุฑุงู ูู ููุญุฉ ุงูุฃุฏูู
- โ ุงูููุงููุฉ/ุงูุฑูุถ ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุฑุณู ุชููุงุฆูุงู
- โ ุงูุจููุต $5 ููุถุงู ุชููุงุฆูุงู
- โ ุงูุฅุญุตุงุฆูุงุช ุฏูููุฉ 100%

---
**ููุช ุงูุชุทุจูู ุงููุชููุน:** 10-15 ุฏูููุฉ  
**ูุณุชูู ุงูุตุนูุจุฉ:** ุณูู โญโญ
